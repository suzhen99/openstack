#platform=x86, AMD64, or Intel EM64T
#version=DEVEL
# Install OS instead of upgrade
install
# Keyboard layouts
# old format: keyboard us
# new format:
keyboard --vckeymap=us --xlayouts='us'
# Root password
rootpw --plaintext redhat
# System language
lang en_US.UTF-8
# System authorization information
auth  --useshadow  --passalgo=sha512
# Use CDROM installation media
cdrom
repo --name="epel" --baseurl=https://mirrors.aliyun.com/epel/7/x86_64/ --cost=100
repo --name="base" --baseurl=https://mirrors.aliyun.com/centos/7/os/x86_64/ --cost=100
repo --name="updates" --baseurl=https://mirrors.aliyun.com/centos/7/updates/x86_64/ --cost=100
repo --name="extras" --baseurl=https://mirrors.aliyun.com/centos/7/extras/x86_64/ --cost=100
# Use graphical install
text
# Run the Setup Agent on first boot
firstboot --disable
# SELinux configuration
selinux --disabled
# Do not configure the X Window System
skipx

# System services
services --disabled="kdump" --enabled="network,sshd,rsyslog,chronyd"
ignoredisk --only-use=sda
# Firewall configuration
firewall --disabled
# Network information
network  --bootproto=dhcp --device=ens33 --onboot=on --hostname=localhost.localdomain
network  --bootproto=dhcp --device=ens38

# Reboot after installation
reboot
# System timezone
timezone UTC --isUtc
# Clear the Master Boot Record
zerombr
# Partition clearing information
clearpart --all --initlabel --drives=sda
# Disk partitioning information
part / --fstype="xfs" --ondisk=sda --size=8191

%packages
@^minimal
@core
chrony
kexec-tools
wget
yum-utils
yum-plugin-priorities
-NetworkManager
%end

%post --erroronfail

%end
